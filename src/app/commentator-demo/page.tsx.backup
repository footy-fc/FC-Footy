'use client';

import React, { useState } from 'react';
import PeterDruryComposeCast from '~/components/PeterDruryComposeCast';
import { type MatchEvent } from '~/components/ai/PeterDruryRAG';

// Demo scenarios
const DEMO_SCENARIOS = [
  {
    id: 'messi-wc-final',
    name: 'Messi World Cup Final Goal',
    eventId: 'wc22-arg-fra-01',
    homeTeam: 'Argentina',
    awayTeam: 'France',
    competition: 'FIFA World Cup 2022',
    eventType: 'goal' as MatchEvent['eventType'],
    player: 'Lionel Messi',
    minute: 23,
    score: '1-0',
    context: 'Messi opens the scoring in the World Cup final'
  },
  {
    id: 'roma-comeback',
    name: 'Roma Historic Comeback',
    eventId: 'ucl18-roma-barca-03',
    homeTeam: 'AS Roma',
    awayTeam: 'FC Barcelona',
    competition: 'UEFA Champions League',
    eventType: 'goal' as MatchEvent['eventType'],
    player: 'Kostas Manolas',
    minute: 82,
    score: '3-0',
    context: 'Roma complete historic comeback to advance on away goals'
  },
  {
    id: 'morocco-upset',
    name: 'Morocco Historic Win',
    eventId: 'wc22-morocco-bel-01',
    homeTeam: 'Morocco',
    awayTeam: 'Belgium',
    competition: 'FIFA World Cup 2022',
    eventType: 'goal' as MatchEvent['eventType'],
    player: 'Zakaria Aboukhlal',
    minute: 73,
    score: '2-0',
    context: 'Morocco secure historic group stage victory'
  },
  {
    id: 'cameroon-brazil',
    name: 'Cameroon vs Brazil Upset',
    eventId: 'wc22-cameroon-brazil-01',
    homeTeam: 'Cameroon',
    awayTeam: 'Brazil',
    competition: 'FIFA World Cup 2022',
    eventType: 'goal' as MatchEvent['eventType'],
    player: 'Vincent Aboubakar',
    minute: 92,
    score: '1-0',
    context: 'Stoppage time winner against Brazil'
  },
  {
    id: 'senegal-captain',
    name: 'Senegal Captain\'s Goal',
    eventId: 'wc22-senegal-ecuador-01',
    homeTeam: 'Senegal',
    awayTeam: 'Ecuador',
    competition: 'FIFA World Cup 2022',
    eventType: 'goal' as MatchEvent['eventType'],
    player: 'Kalidou Koulibaly',
    minute: 70,
    score: '2-1',
    context: 'Captain\'s volley sends Senegal through to knockout stage'
  },
  {
    id: 'final-whistle',
    name: 'Final Whistle - Argentina Champions',
    eventId: 'wc22-arg-fra-final',
    homeTeam: 'Argentina',
    awayTeam: 'France',
    competition: 'FIFA World Cup 2022',
    eventType: 'final_whistle' as MatchEvent['eventType'],
    minute: 120,
    score: '3-3 (4-2 pens)',
    context: 'Argentina win World Cup after dramatic penalty shootout'
  }
];

export default function PeterDruryDemoPage() {
  const [selectedScenario, setSelectedScenario] = useState(DEMO_SCENARIOS[0]);
  const [generatedCommentary, setGeneratedCommentary] = useState<string>('');

  const handleCommentaryGenerated = (commentary: string) => {
    setGeneratedCommentary(commentary);
  };

  return (
    <div className="min-h-screen bg-darkPurple p-4">
      <div className="max-w-4xl mx-auto">
        {/* Header */}
        <div className="text-center mb-8">
          <h1 className="text-4xl font-bold text-notWhite mb-4">
            üé§ Peter Drury Commentary AI
          </h1>
          <p className="text-lightPurple text-lg max-w-2xl mx-auto">
            Experience the magic of Peter DruryDruryPeter DruryDrury'sapos;sapos;sapos;s legendary commentary style, 
            powered by AI and trained on his most iconic moments.
          </p>
        </div>

        {/* Scenario Selector */}
        <div className="mb-8">
          <h2 className="text-2xl font-bold text-notWhite mb-4">üì∫ Select Match Scenario</h2>
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            {DEMO_SCENARIOS.map((scenario) => (
              <button
                key={scenario.id}
                onClick={() => setSelectedScenario(scenario)}
                className={`p-4 rounded-lg border transition-all ${
                  selectedScenario.id === scenario.id
                    ? 'border-limeGreenOpacity bg-limeGreenOpacity/10'
                    : 'border-limeGreenOpacity/20 bg-purplePanel hover:border-limeGreenOpacity/40'
                }`}
              >
                <h3 className="font-semibold text-notWhite mb-2">{scenario.name}</h3>
                <div className="text-sm text-lightPurple space-y-1">
                  <div>üèüÔ∏è {scenario.homeTeam} vs {scenario.awayTeam}</div>
                  <div>üèÜ {scenario.competition}</div>
                  <div>‚öΩ {scenario.eventType.toUpperCase()}</div>
                  {scenario.player && <div>üë§ {scenario.player}</div>}
                  {scenario.minute && <div>‚è∞ {scenario.minute}{scenario.minute}'apos;</div>}
                  {scenario.score && <div>üìä {scenario.score}</div>}
                </div>
              </button>
            ))}
          </div>
        </div>

        {/* Peter Drury Commentary Component */}
        <div className="mb-8">
          <PeterDruryComposeCast
            eventId={selectedScenario.eventId}
            homeTeam={selectedScenario.homeTeam}
            awayTeam={selectedScenario.awayTeam}
            competition={selectedScenario.competition}
            eventType={selectedScenario.eventType}
            player={selectedScenario.player}
            minute={selectedScenario.minute}
            score={selectedScenario.score}
            context={selectedScenario.context}
            onCommentaryGenerated={handleCommentaryGenerated}
          />
        </div>

        {/* Generated Commentary History */}
        {generatedCommentary && (
          <div className="bg-purplePanel rounded-lg p-6 border border-limeGreenOpacity/20">
            <h2 className="text-2xl font-bold text-notWhite mb-4">üé≠ Latest Commentary</h2>
            <div className="bg-darkPurple rounded p-4 border border-limeGreenOpacity/10">
              <p className="text-lightPurple italic text-xl leading-relaxed">
                "{generatedCommentary}"quot;{generatedCommentary}"{generatedCommentary}"quot;
              </p>
            </div>
            <div className="mt-4 text-sm text-gray-400">
              <p>üí° This commentary was generated using AI trained on Peter DruryDruryPeter DruryDrury'sapos;sapos;sapos;s iconic moments, 
              including his legendary calls from Roma vs Barcelona, World Cup finals, and more.</p>
            </div>
          </div>
        )}

        {/* Features Section */}
        <div className="mt-12 grid grid-cols-1 md:grid-cols-3 gap-6">
          <div className="bg-purplePanel rounded-lg p-6 border border-limeGreenOpacity/20">
            <h3 className="text-xl font-bold text-notWhite mb-3">üéØ RAG-Powered</h3>
            <p className="text-lightPurple">
              Uses Retrieval-Augmented Generation to find the most relevant Peter Drury quotes 
              for each match scenario.
            </p>
          </div>
          
          <div className="bg-purplePanel rounded-lg p-6 border border-limeGreenOpacity/20">
            <h3 className="text-xl font-bold text-notWhite mb-3">üé≠ Authentic Style</h3>
            <p className="text-lightPurple">
              Trained on DruryDrury'sapos;s signature poetic language, mythology references, 
              and dramatic crescendos.
            </p>
          </div>
          
          <div className="bg-purplePanel rounded-lg p-6 border border-limeGreenOpacity/20">
            <h3 className="text-xl font-bold text-notWhite mb-3">üì± Farcaster Ready</h3>
            <p className="text-lightPurple">
              Directly compose casts with generated commentary, 
              perfect for live match updates and reactions.
            </p>
          </div>
        </div>

        {/* Footer */}
        <div className="mt-12 text-center text-lightPurple">
          <p className="text-sm">
            üé§ Peter Drury Commentary AI - Bringing the magic of footballfootball'sapos;s greatest commentator to your fingertips
          </p>
        </div>
      </div>
    </div>
  );
}
